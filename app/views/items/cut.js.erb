$("#<%= @item.view_id %>").fadeOut(function() {
  $(this).remove();
});

if($("#<%= @parent.view_id %>").length) {
  var parent = $("<%= raw escape_javascript(render @parent) %>");
  $("#<%= @parent.view_id %>").replaceWith(parent);
  MyFile.apply_js_item(parent);
} else {
  var item = $("<%= raw escape_javascript(render @item) %>");
  MyFile.append_item(item);
}

if($("#<%= @old_parent.view_id %>").length) {
  var old_parent = $("<%= raw escape_javascript(render @old_parent) %>");
  $("#<%= @old_parent.view_id %>").replaceWith(old_parent);
  MyFile.apply_js_item(old_parent);
}
